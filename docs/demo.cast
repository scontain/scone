{"version": 2, "width": 210, "height": 50, "timestamp": 1757872673, "env": {"SHELL": "/bin/bash", "TERM": "screen"}, "title": "Installing SCONE CLI and SCONE Operator"}
[0.011778, "o", "#"]
[0.056061, "o", " "]
[0.09968, "o", "C"]
[0.143516, "o", "h"]
[0.187188, "o", "e"]
[0.230852, "o", "c"]
[0.274707, "o", "k"]
[0.318528, "o", "i"]
[0.362251, "o", "n"]
[0.406163, "o", "g"]
[0.450238, "o", " "]
[0.493688, "o", "p"]
[0.537543, "o", "r"]
[0.581595, "o", "e"]
[0.62528, "o", "r"]
[0.669168, "o", "e"]
[0.713273, "o", "q"]
[0.757156, "o", "u"]
[0.80094, "o", "i"]
[0.844896, "o", "s"]
[0.8887, "o", "i"]
[0.93246, "o", "t"]
[0.976827, "o", "e"]
[1.020921, "o", "s"]
[1.064717, "o", " "]
[1.108957, "o", "a"]
[1.152935, "o", "n"]
[1.197078, "o", "d"]
[1.241476, "o", " "]
[1.285219, "o", "i"]
[1.329379, "o", "n"]
[1.373182, "o", "s"]
[1.417722, "o", "t"]
[1.461371, "o", "a"]
[1.506005, "o", "l"]
[1.549977, "o", "l"]
[1.593863, "o", "i"]
[1.637629, "o", "n"]
[1.681348, "o", "g"]
[1.724963, "o", " "]
[1.768602, "o", "S"]
[1.812401, "o", "C"]
[1.856399, "o", "O"]
[1.900153, "o", "N"]
[1.943837, "o", "E"]
[1.987595, "o", " "]
[2.031231, "o", "C"]
[2.075012, "o", "L"]
[2.119244, "o", "I"]
[2.162861, "o", "."]
[2.206584, "o", "."]
[2.250245, "o", "."]
[2.2945, "o", "\r\n"]
[2.901015, "o", "s"]
[2.944292, "o", "c"]
[2.98834, "o", "r"]
[3.032153, "o", "i"]
[3.076126, "o", "p"]
[3.120236, "o", "t"]
[3.164557, "o", "s"]
[3.208903, "o", "/"]
[3.252807, "o", "p"]
[3.296633, "o", "r"]
[3.340406, "o", "e"]
[3.384385, "o", "r"]
[3.428287, "o", "e"]
[3.472313, "o", "q"]
[3.516775, "o", "u"]
[3.560619, "o", "i"]
[3.604476, "o", "s"]
[3.64843, "o", "i"]
[3.692825, "o", "t"]
[3.736272, "o", "e"]
[3.7796, "o", "_"]
[3.823773, "o", "c"]
[3.867325, "o", "h"]
[3.911167, "o", "e"]
[3.954848, "o", "c"]
[3.999003, "o", "k"]
[4.042975, "o", "."]
[4.087127, "o", "s"]
[4.13204, "o", "h"]
[4.175702, "o", "\r\n"]
[4.178991, "o", "\u001b[1;35m"]
[4.180491, "o", "# Checking Prerequisites\r\n\r\n## Checking Commands\r\n\r\nTo run our commands and to transform manifests and container images,\r\nwe need a set of executable. We install the following external 'executable' on\r\nthe current machine:\r\n\r\n- 'cosign': needed to sign and verify the signature of container images\r\n- 'docker': needed to build and run docker images\r\n- 'kubectl': command line interface for Kubernetes\r\n- 'yq': command to access yaml documents\r\n- 'sed': simple editor to manipulate text files\r\n- 'gh': GitHub command line interface\r\n- 'pkg-config': A tool for discovering compiler and linker flags\r\n- 'jq': command to access json documents\r\n- 'libssl-dev': ssl development tools\r\n\r\n> NOTE: If the script fails on the first run with error:\r\n> 'Errors were encountered while processing: scone-glibc'\r\n> please run a second time.\r\n\r\n"]
[4.18102, "o", "\u001b[0m"]
[4.181303, "o", "‚úîÔ∏è Cosign is already installed.\r\n"]
[4.181451, "o", "‚úîÔ∏è Docker is already installed.\r\n‚úîÔ∏è GitHub CLI is already installed.\r\n"]
[4.181518, "o", "‚úîÔ∏è kubectl is already installed.\r\n"]
[4.323799, "o", "‚úîÔ∏è yq v4 is installed (meets requirement v4+).\r\n"]
[4.383579, "o", "‚úîÔ∏è sed is already installed.\r\n"]
[4.479466, "o", "‚úÖ All external executables are installed and ready\r\n\u001b[1;35m"]
[4.480953, "o", "\r\n## Check access to 'scone.cloud' images\r\n\r\nWe check that we can pull some SCONE container images that we need to execute\r\nthe transformations. If this fail, please do the following:\r\n\r\n- generate an access token following these instructions: <https://sconedocs.github.io/registry/#create-an-access-token>\r\n\r\n"]
[4.481204, "o", "\u001b[0m"]
[4.767111, "o", "The lastest stable version of SCONE is 6.0.2\r\n\u001b[1;33müì¶ Checking access to required container images...\u001b[0m\r\n"]
[6.217382, "o", "‚úÖ image 'registry.scontain.com/scone.cloud/sconecli:6.0.2' is accessible\r\n"]
[6.919288, "o", "‚úÖ image 'registry.scontain.com/scone.cloud/scone-deb-pkgs:6.0.2' is accessible\r\n"]
[7.628013, "o", "‚úÖ image 'registry.scontain.com/scone.cloud/sconecli:6.0.2' is accessible\r\n"]
[8.312299, "o", "‚úÖ image 'registry.scontain.com/public-images/glibc:2.35-v4' is accessible\r\n"]
[9.035042, "o", "‚úÖ image 'registry.scontain.com/public-images/glibc:2.39-v3' is accessible\r\n\u001b[0;32m‚úîÔ∏è All images are OK.\u001b[0m\r\n\u001b[1;35m"]
[9.036847, "o", "\r\n## Install SCONE CLI tools\r\n\r\nWe succeeded to pull the required, images. Next, we can install the 'scone'-replated executable. To do so, we run script './scripts/install_sconecli.sh':\r\n\r\n"]
[9.037165, "o", "\u001b[0m"]
[9.04294, "o", "\u001b[1;35m"]
[9.044393, "o", "# SCONE CLI\r\n\r\nYou can run the ['scone' CLI](https://sconedocs.github.io/CAS_cli/) on your **host machine**, within a **virtual machine (VM)**, or inside a **container**. While running it in a container offers good portability, it may suffer from slower startup times. Therefore, we recommend installing the 'scone' CLI **directly on your development machine** for better performance.\r\n\r\nThis document explains how to install the 'scone' CLI on **Linux distributions that support Debian packages**. Packages are also available for **Alpine Linux**.\r\n\r\n## Caveat When Running Inside a Container\r\n\r\nThere are two versions of the 'scone' CLI:\r\n\r\n- A **native version** that cannot run inside an enclave\r\n- The **default version**, which is designed to run **inside an enclave**\r\n  \r\nBy default, the 'scone' CLI of a container runs confidential in production mode. To run in simulation mode on systems that do not support production TEEs, set the environment variable 'SCONE_PRODUCTION=0', e.g., you can run'SCONE_PRODUCTION=0 scone --help' .\r\n\r\nBelow, we describe how to install the 'scone' CLI using 'auto' mode, i.e., the CLI will most likely run in simulation mode.\r\n\r\n## Installing the 'scone' CLI \r\n\r\nWe assume in this description that you run a Debian-based distribution like Ubuntu. Note that we also have packages for Alpine Linux.\r\n\r\n"]
[9.044955, "o", "\u001b[0m"]
[9.185376, "o", "The lastest stable version of SCONE is 6.0.2\r\n\u001b[1;35m"]
[9.187002, "o", "\r\nThe SCONE CLI is available as Debian packages as part of a container image. \r\nWe first verify that the container image is properly signed by cosign.\r\n\r\nTo do so, we define the cosign public verification key using a function 'create_cosign_verification_key'.\r\nWe verify the signature of a given container image with function 'verify_image':\r\n\r\n"]
[9.187195, "o", "\u001b[0m"]
[9.187351, "o", "\u001b[1;35m"]
[9.189378, "o", "\r\nNext, we define the image that contains the 'scone' CLI Debian package and\r\nverify the image:\r\n\r\n"]
[9.189698, "o", "\u001b[0m"]
[9.189849, "o", "Verifying the signature of image 'registry.scontain.com/scone.cloud/scone-deb-pkgs:6.0.2'\r\n"]
[11.134357, "o", " - verification was successful\r\n\u001b[1;35m"]
[11.136256, "o", "\r\nAfter successful verification, we create a temporary container\r\nto be able to copy the Debian packages to the local filesystem.\r\n\r\n"]
[11.136493, "o", "\u001b[0m"]
[11.198358, "o", "\u001b[1;35m"]
[11.200002, "o", "\r\nNext, we copy the package to the '/tmp' directory and\r\ninstall the 'scone' packages. \r\n\r\nYou need to type your 'sudo' password:\r\n\r\n"]
[11.200289, "o", "\u001b[0m"]
[11.804536, "o", "Successfully copied 108MB to /tmp/\r\n"]
[11.837085, "o", "scone-packages\r\n"]
[11.847591, "o", "[sudo] password for ubuntu: "]
[15.631324, "o", "\r\n"]
[15.671737, "o", "(Reading database ... \r"]
[15.679064, "o", "(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r"]
[15.679148, "o", "(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r"]
[15.679378, "o", "(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r"]
[15.679716, "o", "(Reading database ... 65%\r"]
[15.68976, "o", "(Reading database ... 70%\r"]
[15.716642, "o", "(Reading database ... 75%\r"]
[15.720954, "o", "(Reading database ... 80%\r"]
[15.725676, "o", "(Reading database ... 85%\r"]
[15.733722, "o", "(Reading database ... 90%\r"]
[15.748485, "o", "(Reading database ... 95%\r"]
[15.85623, "o", "(Reading database ... 100%\r(Reading database ... 279548 files and directories currently installed.)\r\n"]
[15.870055, "o", "Preparing to unpack .../scone-common_amd64.deb ...\r\n"]
[15.883149, "o", "Unpacking scone-common (6.0.2) over (6.0.2) ...\r\n"]
[15.925562, "o", "Setting up scone-common (6.0.2) ...\r\n"]
[16.022967, "o", "(Reading database ... \r"]
[16.030727, "o", "(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r"]
[16.030791, "o", "(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r"]
[16.030967, "o", "(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r"]
[16.031025, "o", "(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r"]
[16.031553, "o", "(Reading database ... 65%\r"]
[16.042133, "o", "(Reading database ... 70%\r"]
[16.070324, "o", "(Reading database ... 75%\r"]
[16.074866, "o", "(Reading database ... 80%\r"]
[16.079862, "o", "(Reading database ... 85%\r"]
[16.088154, "o", "(Reading database ... 90%\r"]
[16.103412, "o", "(Reading database ... 95%\r"]
[16.214783, "o", "(Reading database ... 100%\r(Reading database ... 279548 files and directories currently installed.)\r\n"]
[16.228439, "o", "Preparing to unpack .../packages/scone-libc_amd64.deb ...\r\n"]
[16.240939, "o", "Unpacking scone-libc (6.0.2) over (6.0.2) ...\r\n"]
[16.551078, "o", "Setting up scone-libc (6.0.2) ...\r\n"]
[16.654127, "o", "(Reading database ... \r"]
[16.662142, "o", "(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r"]
[16.66236, "o", "(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r"]
[16.662456, "o", "(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r"]
[16.662938, "o", "(Reading database ... 65%\r"]
[16.67363, "o", "(Reading database ... 70%\r"]
[16.701304, "o", "(Reading database ... 75%\r"]
[16.705879, "o", "(Reading database ... 80%\r"]
[16.710786, "o", "(Reading database ... 85%\r"]
[16.718989, "o", "(Reading database ... 90%\r"]
[16.733929, "o", "(Reading database ... 95%\r"]
[16.842814, "o", "(Reading database ... 100%\r(Reading database ... 279548 files and directories currently installed.)\r\n"]
[16.856317, "o", "Preparing to unpack .../packages/scone-cli_amd64.deb ...\r\n"]
[16.867704, "o", "Unpacking scone-cli (6.0.2) over (6.0.2) ...\r\n"]
[18.638118, "o", "Setting up scone-cli (6.0.2) ...\r\n"]
[18.72902, "o", "(Reading database ... \r"]
[18.735913, "o", "(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r"]
[18.735974, "o", "(Reading database ... 20%\r(Reading database ... 25%\r"]
[18.735991, "o", "(Reading database ... 30%\r"]
[18.736207, "o", "(Reading database ... 35%\r(Reading database ... 40%\r"]
[18.736237, "o", "(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r"]
[18.736438, "o", "(Reading database ... 60%\r"]
[18.736687, "o", "(Reading database ... 65%\r"]
[18.745484, "o", "(Reading database ... 70%\r"]
[18.768567, "o", "(Reading database ... 75%\r"]
[18.77226, "o", "(Reading database ... 80%\r"]
[18.776287, "o", "(Reading database ... 85%\r"]
[18.782869, "o", "(Reading database ... 90%\r"]
[18.795088, "o", "(Reading database ... 95%\r"]
[18.903666, "o", "(Reading database ... 100%\r(Reading database ... 279548 files and directories currently installed.)\r\n"]
[18.918301, "o", "Preparing to unpack /tmp/packages/k8s-scone.deb ...\r\n"]
[18.931063, "o", "Unpacking k8s-scone (0.1.0-1) over (0.1.0-1) ...\r\n"]
[19.182026, "o", "Setting up k8s-scone (0.1.0-1) ...\r\n"]
[19.353665, "o", "(Reading database ... \r"]
[19.359378, "o", "(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r"]
[19.359445, "o", "(Reading database ... 30%\r"]
[19.359682, "o", "(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r"]
[19.359719, "o", "(Reading database ... 55%\r(Reading database ... 60%\r"]
[19.360125, "o", "(Reading database ... 65%\r"]
[19.369582, "o", "(Reading database ... 70%\r"]
[19.394873, "o", "(Reading database ... 75%\r"]
[19.39892, "o", "(Reading database ... 80%\r"]
[19.403334, "o", "(Reading database ... 85%\r"]
[19.410951, "o", "(Reading database ... 90%\r"]
[19.424928, "o", "(Reading database ... 95%\r"]
[19.527584, "o", "(Reading database ... 100%\r(Reading database ... 279548 files and directories currently installed.)\r\n"]
[19.541163, "o", "Preparing to unpack .../tmp/packages/kubectl-scone.deb ...\r\n"]
[19.554638, "o", "Unpacking kubectl-scone (5.10.0-1) over (5.10.0-1) ...\r\n"]
[19.913554, "o", "Setting up kubectl-scone (5.10.0-1) ...\r\n"]
[19.983105, "o", "\u001b[1;35m"]
[19.985028, "o", "\r\nWe ensure that 'kubectl-scone' plugin only exists once - otherwise, 'kubectl' issues a warning:\r\n\r\n"]
[19.98533, "o", "\u001b[0m"]
[19.989272, "o", "\u001b[1;35m"]
[19.990595, "o", "\r\nCheck that the 'scone' cli is properly installed by executing:\r\n\r\n"]
[19.990882, "o", "\u001b[0mExpecting SCONE version: 6.0.2\r\n"]
[21.568661, "o", "Scone CLI 6.0.2\r\n"]
[21.808133, "o", "\u001b[1;35m"]
[21.809838, "o", "\r\nThis should execute the same SCONE version as the previously printed latest stable version.\r\n(The minimal version is 5.10.1)\r\n\r\n"]
[21.810075, "o", "\u001b[0m‚úÖ All scone-related executable installed\r\n"]
[22.416716, "o", "#"]
[22.460505, "o", " "]
[22.503967, "o", "N"]
[22.547592, "o", "e"]
[22.591502, "o", "x"]
[22.635292, "o", "t"]
[22.679625, "o", ","]
[22.723459, "o", " "]
[22.767335, "o", "w"]
[22.811099, "o", "e"]
[22.854932, "o", " "]
[22.899219, "o", "i"]
[22.942955, "o", "n"]
[22.98737, "o", "s"]
[23.031524, "o", "t"]
[23.075333, "o", "a"]
[23.119023, "o", "l"]
[23.162967, "o", "l"]
[23.206912, "o", " "]
[23.251111, "o", "t"]
[23.295284, "o", "h"]
[23.339014, "o", "e"]
[23.382847, "o", " "]
[23.42675, "o", "S"]
[23.470949, "o", "C"]
[23.514803, "o", "O"]
[23.558762, "o", "N"]
[23.602477, "o", "E"]
[23.646269, "o", " "]
[23.689955, "o", "o"]
[23.73373, "o", "p"]
[23.777471, "o", "e"]
[23.821334, "o", "r"]
[23.864957, "o", "a"]
[23.90856, "o", "t"]
[23.952357, "o", "o"]
[23.996343, "o", "r"]
[24.040164, "o", " "]
[24.084041, "o", "i"]
[24.128032, "o", "n"]
[24.172363, "o", "c"]
[24.216295, "o", "l"]
[24.260344, "o", "u"]
[24.304236, "o", "d"]
[24.347944, "o", "i"]
[24.391544, "o", "n"]
[24.43582, "o", "g"]
[24.479764, "o", " "]
[24.523498, "o", "S"]
[24.567188, "o", "C"]
[24.611014, "o", "O"]
[24.655284, "o", "N"]
[24.699408, "o", "E"]
[24.74314, "o", " "]
[24.787056, "o", "S"]
[24.830802, "o", "G"]
[24.874682, "o", "X"]
[24.918409, "o", " "]
[24.962123, "o", "P"]
[25.006483, "o", "l"]
[25.050538, "o", "u"]
[25.094462, "o", "g"]
[25.138435, "o", "i"]
[25.182145, "o", "n"]
[25.225773, "o", ","]
[25.269917, "o", " "]
[25.313582, "o", "S"]
[25.357924, "o", "C"]
[25.401498, "o", "O"]
[25.445379, "o", "N"]
[25.489413, "o", "E"]
[25.533216, "o", " "]
[25.576974, "o", "L"]
[25.621306, "o", "o"]
[25.665109, "o", "c"]
[25.709041, "o", "a"]
[25.75298, "o", "l"]
[25.796739, "o", " "]
[25.840636, "o", "A"]
[25.884271, "o", "t"]
[25.928284, "o", "t"]
[25.971978, "o", "e"]
[26.015836, "o", "s"]
[26.059748, "o", "t"]
[26.103305, "o", "a"]
[26.146921, "o", "t"]
[26.190643, "o", "i"]
[26.234262, "o", "o"]
[26.278131, "o", "n"]
[26.321985, "o", " "]
[26.365648, "o", "S"]
[26.410308, "o", "e"]
[26.454427, "o", "r"]
[26.498366, "o", "v"]
[26.542541, "o", "i"]
[26.586619, "o", "c"]
[26.630342, "o", "e"]
[26.674266, "o", "\r\n"]
[27.280336, "o", "s"]
[27.323974, "o", "c"]
[27.367856, "o", "r"]
[27.411625, "o", "i"]
[27.455584, "o", "p"]
[27.499334, "o", "t"]
[27.543535, "o", "s"]
[27.587422, "o", "/"]
[27.631106, "o", "r"]
[27.675036, "o", "e"]
[27.718883, "o", "c"]
[27.762782, "o", "o"]
[27.806481, "o", "n"]
[27.85068, "o", "c"]
[27.894698, "o", "i"]
[27.938534, "o", "l"]
[27.982333, "o", "e"]
[28.026109, "o", "_"]
[28.069815, "o", "s"]
[28.113564, "o", "c"]
[28.157584, "o", "o"]
[28.201317, "o", "n"]
[28.245347, "o", "e"]
[28.289124, "o", "_"]
[28.33324, "o", "o"]
[28.376987, "o", "p"]
[28.420948, "o", "e"]
[28.464731, "o", "r"]
[28.508435, "o", "a"]
[28.55221, "o", "t"]
[28.595949, "o", "o"]
[28.63965, "o", "r"]
[28.683282, "o", "."]
[28.727121, "o", "s"]
[28.771411, "o", "h"]
[28.8153, "o", "\r\n"]
[28.82065, "o", "\u001b[1;35m"]
[28.821818, "o", "## Installation of the SCONE Platform\r\n\r\nTo install or update the SCONE platform in a Kubernetes cluster, please perform the following steps.\r\n\r\nYou can execute the steps automatically by running the script 'scripts/reconcile_scone_operator.sh'. The script expects the cluster already be installed, i.e., it only upgrades to the latest stable version.\r\n\r\n0. Determine the current stable version of the SCONE platform using 'curl':\r\n\r\n"]
[28.822565, "o", "\u001b[0m"]
[29.016091, "o", "The lastest stable version of SCONE is 6.0.2\r\n\u001b[1;35m"]
[29.017522, "o", "\r\n1. Make sure that we actually want to update the current cluster\r\n\r\n"]
[29.017871, "o", "\u001b[0m"]
[29.084895, "o", "üì¶ Current Kubernetes context: central\r\nDo you want to proceed install SCONE version 6.0.2 with this context? [y/N] "]
[30.528262, "o", "y"]
[31.144408, "o", "\r\n"]
[31.144903, "o", "‚úÖ Proceeding with context: central\r\n\u001b[1;35m"]
[31.146794, "o", "\r\n2. Download the script to install the SCONE platform:\r\n\r\nTo simplify the cleanup, we download the installation script into a temporary directory:\r\n\r\n"]
[31.147121, "o", "\u001b[0m"]
[31.485921, "o", "Downloaded script 'operator_controller' into directory /tmp/SCONE_OPERATOR_CONTROLLER\r\n\u001b[1;35m"]
[31.487354, "o", "\r\n3. Verify the signature of the script:\r\n\r\nDownload the signature of the operator controller:\r\n\r\n"]
[31.487605, "o", "\u001b[0m"]
[31.765034, "o", "Downloaded signature of 'operator_controller' to file 'operator_controller.asc'\r\n\u001b[1;35m"]
[31.766776, "o", "\r\nDefine bash functions:\r\n\r\n- 'create_gpg_verification_key': create a temporary file that contains the public key to verify the signature of the script.\r\n- 'verify_file': verifies that the signature matches the file and the given public key.\r\n\r\n"]
[31.767001, "o", "\u001b[0m"]
[31.767235, "o", "\u001b[1;35m"]
[31.768822, "o", "\r\nNext, we verify the signature of the script 'operator_controller':\r\n\r\n"]
[31.769088, "o", "\u001b[0m"]
[31.781705, "o", "\u001b[1;35m"]
[31.783321, "o", "\r\nPlease check that output is empty. Stop if error message 'Signature check FAILED' is printed.\r\n\r\n4. Verifying if the cluster is properly installed:\r\n\r\nWe first define a cleanup function to cleanup after the 'operator_controller':\r\n\r\n"]
[31.783746, "o", "\u001b[0m\u001b[1;35m"]
[31.785032, "o", "\r\nWe ensure that the correct 'kubectl provision' plugin is installed:\r\n\r\n"]
[31.785254, "o", "\u001b[0m"]
[31.789392, "o", "\u001b[33mWARNING: Using external VERSION=6.0.2\u001b[0m\r\n"]
[37.305632, "o", "\u001b[1;35m"]
[37.307357, "o", "\r\n5. Set your Intel API Key\r\n\r\nTo install the SCONE platform, you need an Intel API key. Please visit <https://api.portal.trustedservices.intel.com/manage-subscriptions> to generate or copy your DCAP API Key. Store this API key in a local environment variable:\r\n\r\nexport DCAP_KEY=\"...\"\r\n\r\nIn case your cluster has already been installed, you can extract the DCAP_API_KEY as follows:\r\n\r\n"]
[37.307608, "o", "\u001b[0m"]
[37.307746, "o", "WARNING: No DCAP API Key in environment variable DCAP_KEY specified\r\n"]
[37.401906, "o", "WARNING: Using DCAP_KEY extracted from LAS - not recommended.\r\n\u001b[1;35m"]
[37.403446, "o", "\r\nIn case we use the default DCAP API key, we ask the user for some input:\r\n\r\n"]
[37.403704, "o", "\u001b[0m"]
[37.40385, "o", "\u001b[1;35m"]
[37.40536, "o", "\r\nNext, we run the 'operator_controller' to check if the proper version is installed:\r\n\r\n"]
[37.405595, "o", "\u001b[0m"]
[37.49278, "o", "\u001b[0;39mfalse\u001b[0m\r\n"]
[37.496072, "o", "Scone Operator is not installed, ready or version does NOT match.\r\n"]
[37.496108, "o", "\u001b[1;35m"]
[37.498109, "o", "\r\nIf the latest stable version is installed and healthy, we can stop here. Otherwise, if we need to update or reconcile the platform, please continue with step 5. If the SCONE platform is not yet installed, please continue with step 6.\r\n\r\nIn case we upgrade from version 5 to version 6, we need to delete CRD 'vault'. We ignore if the removal fails because vault crd might not exist:\r\n\r\n"]
[37.498368, "o", "\u001b[0m"]
[37.615131, "o", "customresourcedefinition.apiextensions.k8s.io \"vaults.services.scone.cloud\" deleted\r\n"]
[37.777877, "o", "\u001b[1;35m"]
[37.779276, "o", "\r\n6. Ensure that the image pull secret 'sconeapps' exists:\r\n\r\nWe check if we can read the secret:\r\n\r\n"]
[37.779652, "o", "\u001b[0m"]
[37.87206, "o", "\"sconeapps\" image pull secret exists\r\n"]
[37.972586, "o", "\"sconeapps\" image pull secret exists\r\n\u001b[1;35m"]
[37.974411, "o", "\r\nWe assume that you use the 'scone.cloud' image registry, you would need to deploy image pull secrets. For this, you will need to set environment variables:\r\n\r\nexport REGISTRY_USERNAME=<your-name> # username of the registry service account\r\nexport REGISTRY_ACCESS_TOKEN=<your-access-toke> # read access token\r\nexport REGISTRY_EMAIL=<your-email> # email address of the service account\r\n\r\nFor more details, please read the following document: [Create an Access Token](https://sconedocs.github.io/registry/#create-an-access-token). In the script (i.e., 'reconcile_scone_operator.sh'), we\r\nask the user to input the values for these variables:\r\n\r\n"]
[37.974629, "o", "\u001b[0m"]
[37.978971, "o", "\u001b[33mWARNING: Using external VERSION=6.0.2\u001b[0m\r\n"]
[38.144328, "o", "\u001b[34m- Checking that you have access to cosign.\u001b[0m\r\n"]
[42.00329, "o", "\u001b[34m- auto_detect_helm_driver: HELM_DRIVER=secret\u001b[0m\r\n"]
[42.003922, "o", "\u001b[34m- Checking if upgrade is supported...\u001b[0m\r\n"]
[42.901494, "o", "\u001b[34m- Checking if the kubectl plugin exists\u001b[0m\r\n"]
[42.987309, "o", "\u001b[34m-   SCONE kubectl plugin version 6.0.2 is already installed\u001b[0m\r\n"]
[42.987615, "o", "\u001b[34m- Updating / fixing all components\u001b[0m\r\n"]
[42.987704, "o", "\u001b[34m- Checking that we have access to kubectl\u001b[0m\r\n"]
[42.987873, "o", "\u001b[34m- Checking that we have access to helm\u001b[0m\r\n"]
[42.987953, "o", "\u001b[34m- Checking that we have access to jq\u001b[0m\r\n"]
[42.988028, "o", "\u001b[34m- Checking that you have access to a Kubernetes cluster.\u001b[0m\r\n"]
[43.086316, "o", "\u001b[34m- Checking if the docker daemon is running locally\u001b[0m\r\n"]
[43.111599, "o", "\u001b[34m- Checking that we have local access to container images repo registry.scontain.com/scone.cloud.\u001b[0m\r\n"]
[43.785513, "o", "6.0.2: Pulling from scone.cloud/k8soperators\r\n"]
[43.788411, "o", "Digest: sha256:8df809a46ed6a2aed0422e1a5ff539f1a2f8b10b24e84375f05c3e5d7ffce2b5\r\nStatus: Image is up to date for registry.scontain.com/scone.cloud/k8soperators:6.0.2\r\n"]
[43.790626, "o", "registry.scontain.com/scone.cloud/k8soperators:6.0.2\r\n"]
[43.793555, "o", "\u001b[34m-    Checking whether there are instances of vaults.services.scone.cloud CRD installed\u001b[0m\r\n"]
[43.885917, "o", "Error from server (NotFound): customresourcedefinitions.apiextensions.k8s.io \"vaults.services.scone.cloud\" not found\r\n"]
[43.890717, "o", "\u001b[34m- Checking cert-manager\u001b[0m\r\n"]
[43.890903, "o", "\u001b[34m-   Updating cert-manager (using manifest https://github.com/cert-manager/cert-manager/releases/download/v1.18.2/cert-manager.yaml)\u001b[0m\r\n"]
[46.505884, "o", "namespace/cert-manager unchanged\r\n"]
[46.518352, "o", "customresourcedefinition.apiextensions.k8s.io/certificaterequests.cert-manager.io unchanged\r\n"]
[46.532892, "o", "customresourcedefinition.apiextensions.k8s.io/certificates.cert-manager.io unchanged\r\n"]
[46.583956, "o", "customresourcedefinition.apiextensions.k8s.io/challenges.acme.cert-manager.io unchanged\r\n"]
[46.640907, "o", "customresourcedefinition.apiextensions.k8s.io/clusterissuers.cert-manager.io unchanged\r\n"]
[46.699024, "o", "customresourcedefinition.apiextensions.k8s.io/issuers.cert-manager.io unchanged\r\n"]
[46.705951, "o", "customresourcedefinition.apiextensions.k8s.io/orders.acme.cert-manager.io unchanged\r\n"]
[46.709446, "o", "serviceaccount/cert-manager-cainjector unchanged\r\n"]
[46.71233, "o", "serviceaccount/cert-manager unchanged\r\n"]
[46.714794, "o", "serviceaccount/cert-manager-webhook unchanged\r\n"]
[46.72209, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-cainjector unchanged\r\n"]
[46.737085, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-controller-issuers unchanged\r\n"]
[46.744496, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-controller-clusterissuers unchanged\r\n"]
[46.752221, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-controller-certificates unchanged\r\n"]
[46.759741, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-controller-orders unchanged\r\n"]
[46.767933, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-controller-challenges unchanged\r\n"]
[46.775381, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-controller-ingress-shim unchanged\r\n"]
[46.783371, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-cluster-view unchanged\r\n"]
[46.79051, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-view unchanged\r\n"]
[46.798238, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-edit unchanged\r\n"]
[46.805772, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-controller-approve:cert-manager-io unchanged\r\n"]
[46.813512, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-controller-certificatesigningrequests unchanged\r\n"]
[46.820176, "o", "clusterrole.rbac.authorization.k8s.io/cert-manager-webhook:subjectaccessreviews unchanged\r\n"]
[46.829127, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-cainjector unchanged\r\n"]
[46.838753, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-issuers unchanged\r\n"]
[46.84749, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-clusterissuers unchanged\r\n"]
[46.854721, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-certificates unchanged\r\n"]
[46.862935, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-orders unchanged\r\n"]
[46.869766, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-challenges unchanged\r\n"]
[46.877593, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-ingress-shim unchanged\r\n"]
[46.886708, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-approve:cert-manager-io unchanged\r\n"]
[46.894398, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-controller-certificatesigningrequests unchanged\r\n"]
[46.902201, "o", "clusterrolebinding.rbac.authorization.k8s.io/cert-manager-webhook:subjectaccessreviews unchanged\r\n"]
[46.913789, "o", "role.rbac.authorization.k8s.io/cert-manager-cainjector:leaderelection unchanged\r\n"]
[46.921171, "o", "role.rbac.authorization.k8s.io/cert-manager:leaderelection unchanged\r\n"]
[46.929194, "o", "role.rbac.authorization.k8s.io/cert-manager-tokenrequest unchanged\r\n"]
[46.936302, "o", "role.rbac.authorization.k8s.io/cert-manager-webhook:dynamic-serving unchanged\r\n"]
[46.944463, "o", "rolebinding.rbac.authorization.k8s.io/cert-manager-cainjector:leaderelection unchanged\r\n"]
[46.951494, "o", "rolebinding.rbac.authorization.k8s.io/cert-manager:leaderelection unchanged\r\n"]
[46.959734, "o", "rolebinding.rbac.authorization.k8s.io/cert-manager-cert-manager-tokenrequest unchanged\r\n"]
[46.967324, "o", "rolebinding.rbac.authorization.k8s.io/cert-manager-webhook:dynamic-serving unchanged\r\n"]
[46.971803, "o", "service/cert-manager-cainjector unchanged\r\n"]
[46.977059, "o", "service/cert-manager unchanged\r\n"]
[46.981173, "o", "service/cert-manager-webhook unchanged\r\n"]
[46.986172, "o", "deployment.apps/cert-manager-cainjector unchanged\r\n"]
[46.991998, "o", "deployment.apps/cert-manager unchanged\r\n"]
[46.998545, "o", "deployment.apps/cert-manager-webhook unchanged\r\n"]
[47.011113, "o", "mutatingwebhookconfiguration.admissionregistration.k8s.io/cert-manager-webhook configured\r\n"]
[47.019566, "o", "validatingwebhookconfiguration.admissionregistration.k8s.io/cert-manager-webhook configured\r\n"]
[47.031802, "o", "\u001b[34m- Checking that cert-manager webhooks are available.\u001b[0m\r\n"]
[47.032025, "o", "\u001b[34m-     Checking whether the cert-manager-webhook service has been created...\u001b[0m\r\n"]
[47.139242, "o", "\u001b[34m-     The cert-manager-webhook service exists.\u001b[0m\r\n"]
[47.139458, "o", "\u001b[34m-     Checking whether validating webhook cert-manager-webhook exists...\u001b[0m\r\n"]
[47.271465, "o", "\u001b[34m-     Validating webhook cert-manager-webhook exists.\u001b[0m\r\n"]
[47.271731, "o", "\u001b[34m-     Checking whether mutating webhook cert-manager-webhook exists...\u001b[0m\r\n"]
[47.394672, "o", "\u001b[34m-     Mutating webhook cert-manager-webhook exists.\u001b[0m\r\n"]
[47.394752, "o", "\u001b[34m-     Checking whether the pod serving the cert-manager-webhook service is running in namespace cert-manager...\u001b[0m\r\n"]
[47.503872, "o", "\u001b[34m-     The pod serving the cert-manager-webhook service is running.\u001b[0m\r\n"]
[47.50395, "o", "\u001b[34m-     Checking whether the endpoint slice of the cert-manager-webhook service in namespace cert-manager is ready and serving ...\u001b[0m\r\n"]
[47.600374, "o", "\u001b[1;39m{"]
[47.600728, "o", "\r\n  \u001b[0m\u001b[34;1m\"addressType\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"IPv4\"\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"apiVersion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"discovery.k8s.io/v1\"\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"endpoints\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m[\r\n    \u001b[1;39m{\r\n      \u001b[0m\u001b[34;1m\"addresses\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m[\r\n        \u001b[0;32m\"10.0.1.64\"\u001b[0m\u001b[1;39m\r\n      \u001b[1;39m]\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"conditions\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n        \u001b[0m\u001b[34;1m\"ready\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mtrue\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"serving\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mtrue\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"terminating\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mfalse\u001b[0m\u001b[1;39m\r\n      \u001b[1;39m}\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"nodeName\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scontain1a-vm-sgx-3\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"targetRef\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n        \u001b[0m\u001b[34;1m\"kind\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"Pod\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"cert-manager-webhook-5995698f44-4rjm6\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"namespace\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"cert-manager\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"resourceVersion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"398465647\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"uid\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"7eddfe3b-52e2-4a46-8d33-9ea478aacc7e\"\u001b[0m\u001b[1;39m\r\n      \u001b[1;39m}\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m}\u001b[0m\u001b[1;39m\r\n  \u001b[1;39m]\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"kind\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"EndpointSlice\"\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"metadata\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n    \u001b[0m\u001b[34;1m\"annotations\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n      \u001b[0m\u001b[34;1m\"endpoints.kubernetes.io/last-change-trigger-time\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"2025-08-12T12:15:01Z\"\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m}\u001b[0m\u001b[1;39m,\r\n"]
[47.600913, "o", "    \u001b[0m\u001b[34;1m\"creationTimestamp\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"2025-06-22T12:40:47Z\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"generateName\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"cert-manager-webhook-\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"generation\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39m11\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"labels\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n"]
[47.600999, "o", "      \u001b[0m\u001b[34;1m\"app\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"webhook\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"app.kubernetes.io/component\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"webhook\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"app.kubernetes.io/instance\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"cert-manager\"\u001b[0m\u001b[1;39m,\r\n"]
[47.60113, "o", "      \u001b[0m\u001b[34;1m\"app.kubernetes.io/name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"webhook\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"app.kubernetes.io/version\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"v1.18.2\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"endpointslice.kubernetes.io/managed-by\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"endpointslice-controller.k8s.io\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"kubernetes.io/service-name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"cert-manager-webhook\"\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m}\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"cert-manager-webhook-8pqb4\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"namespace\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"cert-manager\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"ownerReferences\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m[\r\n      \u001b[1;39m{\r\n        \u001b[0m\u001b[34;1m\"apiVersion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"v1\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"blockOwnerDeletion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mtrue\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"controller\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mtrue\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"kind\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"Service\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"cert-manager-webhook\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"uid\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"d509f918-2db0-41d1-9c87-5035903418ba\"\u001b[0m\u001b[1;39m\r\n      \u001b[1;39m}\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m]\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"resourceVersion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"398465649\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"uid\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"c46cb3d6-eb5f-4464-8731-c74b9ce55536\"\u001b[0m\u001b[1;39m\r\n  \u001b[1;39m}\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"ports\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m[\r\n    \u001b[1;39m{\r\n      \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"https\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"port\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39m10250\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"protocol\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"TCP\"\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m}\u001b[0m\u001b[1;39m,\r\n    \u001b[1;39m{\r\n      \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"metrics\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"port\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39m9402\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"protocol\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"TCP\"\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m}\u001b[0m\u001b[1;39m\r\n  \u001b[1;39m]\u001b[0m\u001b[1;39m\r\n\u001b[1;39m}\u001b[0m\r\n"]
[47.604213, "o", "\u001b[34m-     The endpoint slice of the cert-manager-webhook service in namespace cert-manager is ready and serving.\u001b[0m\r\n"]
[47.604382, "o", "\u001b[34m-     Checking whether the clientConfig.caBundle exists in both cert-manager-webhook webhook configurations...\u001b[0m\r\n"]
[47.784679, "o", "\u001b[34m-     The clientConfig.caBundle exists in both cert-manager-webhook webhook configurations.\u001b[0m\r\n"]
[47.784918, "o", "\u001b[34m- The cert-manager webhooks are ready.\u001b[0m\r\n"]
[47.785592, "o", "\u001b[34m- Checking that operator namespace 'scone-system' exists\u001b[0m\r\n\u001b[34m-   Checking namespace scone-system\u001b[0m\r\n"]
[47.878056, "o", "\u001b[34m-   Namespace 'scone-system' already exist - no updating/fixing\u001b[0m\r\n"]
[47.995822, "o", "\u001b[34m-   Secret 'scone-operator-pull' already exists in namespace 'scone-system'.\u001b[0m\r\n"]
[48.0951, "o", "\u001b[34m-   Secret 'sconeapps' already exists in namespace 'scone-system'.\u001b[0m\r\n"]
[48.302496, "o", "pod/pull-check-1757872722-7160 created\r\n"]
[54.698732, "o", "‚úì Pull secret \"sconeapps\" WORKS in namespace \"scone-system\".\r\n"]
[54.973508, "o", "pod/pull-check-1757872728-9385 created\r\n"]
[61.374617, "o", "‚úì Pull secret \"scone-operator-pull\" WORKS in namespace \"scone-system\".\r\n"]
[61.489468, "o", "\u001b[34m- Checking SCONE Operator\u001b[0m\r\n"]
[63.247668, "o", "\u001b[34m- Installed version of the operator controller is '5.9.0' and the desired version is '6.0.2'\u001b[0m\r\n"]
[63.24807, "o", "\u001b[34m-   Updating the SCONE Operator: helm upgrade --install scone-operator https://raw.githubusercontent.com/scontain/operator/main/scone-operator-6.0.2.tgz --force --namespace scone-system  --version 6.0.2 --set image=registry.scontain.com/scone.cloud/k8soperators:6.0.2\u001b[0m\r\n\u001b[34m-   Downloading https://raw.githubusercontent.com/scontain/operator/main/scone-operator-6.0.2.tgz\u001b[0m\r\n"]
[63.891507, "o", "\u001b[34m-   Verifying signature of https://raw.githubusercontent.com/scontain/operator/main/scone-operator-6.0.2.tgz\u001b[0m\r\n"]
[63.900932, "o", "\u001b[34m- Verifying the signature of image 'registry.scontain.com/scone.cloud/k8soperators:6.0.2'\u001b[0m\r\n"]
[64.632507, "o", "6.0.2: Pulling from scone.cloud/k8soperators\r\n"]
[64.635386, "o", "Digest: sha256:8df809a46ed6a2aed0422e1a5ff539f1a2f8b10b24e84375f05c3e5d7ffce2b5\r\nStatus: Image is up to date for registry.scontain.com/scone.cloud/k8soperators:6.0.2\r\n"]
[64.637977, "o", "registry.scontain.com/scone.cloud/k8soperators:6.0.2\r\n"]
[65.829362, "o", "\u001b[34m-   verification was successful\u001b[0m\r\n"]
[69.347521, "o", "Release \"scone-operator\" has been upgraded. Happy Helming!\r\nNAME: scone-operator\r\nLAST DEPLOYED: Sun Sep 14 17:59:00 2025\r\nNAMESPACE: scone-system\r\nSTATUS: deployed\r\nREVISION: 22\r\nTEST SUITE: None\r\n"]
[69.365747, "o", "\u001b[34m- Waiting for controller to start up ... 30 seconds\u001b[0m\r\n"]
[99.479539, "o", "deployment.apps/scone-controller-manager restarted\r\n"]
[99.484389, "o", "\u001b[34m- Checking that SCONE Operator's webhooks are available.\u001b[0m\r\n"]
[99.484665, "o", "\u001b[34m-     Checking whether validating webhook scone-validating-webhook-configuration-scone-system exists...\u001b[0m\r\n"]
[99.608004, "o", "\u001b[34m-     Validating webhook scone-validating-webhook-configuration-scone-system exists.\u001b[0m\r\n"]
[99.608246, "o", "\u001b[34m-     Checking whether mutating webhook scone-mutating-webhook-configuration-scone-system exists...\u001b[0m\r\n"]
[99.734004, "o", "\u001b[34m-     Mutating webhook scone-mutating-webhook-configuration-scone-system exists.\u001b[0m\r\n"]
[99.734257, "o", "\u001b[34m-     Checking whether the pod serving the scone-webhook-service service is running in namespace scone-system...\u001b[0m\r\n"]
[99.828634, "o", "\u001b[34m-     The pod serving the scone-webhook-service service is running.\u001b[0m\r\n"]
[99.828921, "o", "\u001b[34m-     Checking whether the endpoint slice of the scone-webhook-service service in namespace scone-system is ready and serving ...\u001b[0m\r\n"]
[99.92166, "o", "\u001b[1;39m{"]
[99.921959, "o", "\r\n"]
[99.922289, "o", "  \u001b[0m\u001b[34;1m\"addressType\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"IPv4\"\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"apiVersion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"discovery.k8s.io/v1\"\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"endpoints\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m[\r\n    \u001b[1;39m{\r\n      \u001b[0m\u001b[34;1m\"addresses\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m[\r\n        \u001b[0;32m\"10.0.1.124\"\u001b[0m\u001b[1;39m\r\n      \u001b[1;39m]\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"conditions\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n"]
[99.92247, "o", "        \u001b[0m\u001b[34;1m\"ready\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mtrue\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"serving\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mtrue\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"terminating\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mfalse\u001b[0m\u001b[1;39m\r\n      \u001b[1;39m}\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"nodeName\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scontain1a-vm-sgx-3\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"targetRef\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n        \u001b[0m\u001b[34;1m\"kind\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"Pod\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scone-controller-manager-54f694f789-vmrqq\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"namespace\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scone-system\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"resourceVersion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"413528209\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"uid\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"ea574957-f00d-42c6-a295-d3d326b27da1\"\u001b[0m\u001b[1;39m\r\n      \u001b[1;39m}\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m}\u001b[0m\u001b[1;39m\r\n  \u001b[1;39m]\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"kind\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"EndpointSlice\"\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"metadata\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n    \u001b[0m\u001b[34;1m\"creationTimestamp\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"2024-09-10T08:31:22Z\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"generateName\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scone-webhook-service-\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"generation\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39m904\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"labels\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m{\r\n      \u001b[0m\u001b[34;1m\"app.kubernetes.io/managed-by\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"Helm\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"endpointslice.kubernetes.io/managed-by\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"endpointslice-controller.k8s.io\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"kubernetes.io/service-name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scone-webhook-service\"\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m}\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scone-webhook-service-stlc4\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"namespace\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scone-system\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"ownerReferences\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m[\r\n      \u001b[1;39m{\r\n        \u001b[0m\u001b[34;1m\"apiVersion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"v1\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"blockOwnerDeletion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mtrue\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"controller\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39mtrue\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"kind\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"Service\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"scone-webhook-service\"\u001b[0m\u001b[1;39m,\r\n        \u001b[0m\u001b[34;1m\"uid\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"0a352bd8-b931-4ef4-8052-53854bb8286d\"\u001b[0m\u001b[1;39m\r\n      \u001b[1;39m}\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m]\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"resourceVersion\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"413528242\"\u001b[0m\u001b[1;39m,\r\n    \u001b[0m\u001b[34;1m\"uid\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"aad78eb7-3423-45fa-b344-fa7533d42419\"\u001b[0m\u001b[1;39m\r\n  \u001b[1;39m}\u001b[0m\u001b[1;39m,\r\n  \u001b[0m\u001b[34;1m\"ports\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[1;39m[\r\n    \u001b[1;39m{\r\n      \u001b[0m\u001b[34;1m\"name\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"\"\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"port\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;39m9443\u001b[0m\u001b[1;39m,\r\n      \u001b[0m\u001b[34;1m\"protocol\"\u001b[0m\u001b[1;39m: \u001b[0m\u001b[0;32m\"TCP\"\u001b[0m\u001b[1;39m\r\n    \u001b[1;39m}\u001b[0m\u001b[1;39m\r\n  \u001b[1;39m]\u001b[0m\u001b[1;39m\r\n\u001b[1;39m}\u001b[0m\r\n"]
[99.926633, "o", "\u001b[34m-     The endpoint slice of the scone-webhook-service service in namespace scone-system is ready and serving.\u001b[0m\r\n"]
[99.926702, "o", "\u001b[34m- The SCONE operator webhooks are ready.\u001b[0m\r\n"]
[103.815637, "o", "\u001b[34m- Checking SGXPlugin\u001b[0m\r\n"]
[103.819041, "o", "\u001b[34m-   Downloading https://raw.githubusercontent.com/scontain/manifests/main/6.0.2/sgxplugin.yaml\u001b[0m\r\n"]
[104.386045, "o", "\u001b[34m-   Verifying signature of https://raw.githubusercontent.com/scontain/manifests/main/6.0.2/sgxplugin.yaml\u001b[0m\r\n"]
[104.485826, "o", "\u001b[34m- Custom Resource 'sgxplugin' does already exists. Checking name.\u001b[0m\r\n"]
[105.479901, "o", "\u001b[34m- Installed version of the SGXPlugin is '5.9.0' and the desired version is '6.0.2'\u001b[0m\r\n"]
[105.48011, "o", "\u001b[34m- Checking again if Custom Resource Definition 'sgxplugins' exists\u001b[0m\r\n"]
[105.568149, "o", "\u001b[33mWARNING: Desired version of SCONE SGXPlugin is NOT installed! (Desired: '6.0.2', Installed: '5.9.0')\u001b[0m\r\n"]
[105.568417, "o", "\u001b[34m-   Fixing the SGXPlugin using https://raw.githubusercontent.com/scontain/manifests/main/6.0.2/sgxplugin.yaml\u001b[0m\r\n"]
[105.568454, "o", "\u001b[34m- Verifying the signature of image 'registry.scontain.com/scone.cloud/sgx-plugin:6.0.2'\u001b[0m\r\n"]
[106.266816, "o", "6.0.2: Pulling from scone.cloud/sgx-plugin\r\n"]
[106.269255, "o", "Digest: sha256:0164f1047804542a5654137503f841f5deacbb9af801444cd507e73e28067690\r\nStatus: Image is up to date for registry.scontain.com/scone.cloud/sgx-plugin:6.0.2\r\n"]
[106.27136, "o", "registry.scontain.com/scone.cloud/sgx-plugin:6.0.2\r\n"]
[107.461367, "o", "\u001b[34m-   verification was successful\u001b[0m\r\n"]
[109.660814, "o", "sgxplugin.base.scone.cloud/sgxplugin configured\r\n"]
[109.672479, "o", "\u001b[34m-   Waiting 120s to make sure new plugin registers to kubernetes\u001b[0m\r\n"]
[229.767201, "o", "\u001b[34m-   Ok.\u001b[0m\r\n"]
[229.858183, "o", "\u001b[34m- Custom Resource 'las' already exists\u001b[0m\r\n"]
[229.955216, "o", "\u001b[34m- LAS uses image registry.scontain.com/scone.cloud/las:5.9.0 and we expect image registry.scontain.com/scone.cloud/las:6.0.2\u001b[0m\r\n"]
[230.058098, "o", "\u001b[34m- Updating LAS image to registry.scontain.com/scone.cloud/las:6.0.2 or updating DCAP_KEY\u001b[0m\r\n"]
[230.058189, "o", "\u001b[34m-   Downloading https://raw.githubusercontent.com/scontain/manifests/main/6.0.2/las.yaml\u001b[0m\r\n"]
[230.630561, "o", "\u001b[34m-   Verifying signature of https://raw.githubusercontent.com/scontain/manifests/main/6.0.2/las.yaml\u001b[0m\r\n"]
[230.639655, "o", "\u001b[34m- Verifying the signature of image 'registry.scontain.com/scone.cloud/las:6.0.2'\u001b[0m\r\n"]
[231.290034, "o", "6.0.2: Pulling from scone.cloud/las\r\n"]
[231.292852, "o", "Digest: sha256:b50e66777ff235b062e4a5122666c8083ca6496c04b587f10d37fb5db37d5a0a\r\nStatus: Image is up to date for registry.scontain.com/scone.cloud/las:6.0.2\r\n"]
[231.295383, "o", "registry.scontain.com/scone.cloud/las:6.0.2\r\n"]
[232.83506, "o", "\u001b[34m-   verification was successful\u001b[0m\r\n"]
[233.247193, "o", "las.base.scone.cloud/las configured\r\n"]
[233.259873, "o", "\u001b[1;35m"]
[233.261427, "o", "\r\n9. Cleaning up temporary files\r\n\r\n"]
[233.261702, "o", "\u001b[0m"]
[233.264099, "o", "‚úÖ SCONE Operator upgraded to version 6.0.2.\r\n\u001b[1;35m"]
[233.265385, "o", "\r\n10. Wait for LAS to become healthy\r\n\r\n"]
[233.265547, "o", "\u001b[0m"]
[233.265615, "o", "/home/ubuntu/GIT/scone\r\n"]
[234.977356, "o", "[INFO] CRD resolved to: las.base.scone.cloud\r\n[INFO] Waiting for CRD to be Established (timeout 300s)‚Ä¶\r\n"]
[235.187515, "o", "customresourcedefinition.apiextensions.k8s.io/las.base.scone.cloud condition met\r\n"]
[235.294447, "o", "[INFO] Discovering instances of las.base.scone.cloud‚Ä¶\r\n"]
[235.425177, "o", "[INFO] Waiting for .status.state == 'HEALTHY' on 1 instance(s)‚Ä¶\r\n"]
[235.5957, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[237.773442, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[239.955678, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[242.113548, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[244.285568, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[246.453143, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[248.623257, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[250.805532, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[252.981944, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[255.154568, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[257.331927, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[259.503994, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[261.711194, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[263.867163, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[266.047562, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[268.233179, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[270.398238, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
[272.585818, "o", "[INFO] 0/1 ready; waiting 2s‚Ä¶\r\n  - las: UNHEALTHY\r\n"]
